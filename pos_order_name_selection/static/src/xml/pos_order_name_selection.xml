<?xml version="1.0" encoding="UTF-8"?>
<template>
    <t t-name="OrderNameWidget">
        <div class='control-button'
             style="width: 70%;margin-top: 5px;margin-bottom: -5px;">
            <div class="coupons">
                <i class='fa fa-star'/>
                Order name
            </div>
        </div>
    </t>
    <t t-extend="ProductScreenWidget">
        <t t-jquery='div.placeholder-ActionpadWidget' t-operation='before'>
            <div class="placeholder-OrderNameWidget"></div>
        </t>
    </t>
    <t t-extend="ProductScreenWidget">
        <t t-jquery='div.placeholder-ActionpadWidget' t-operation='before'>
            <div class='control-button'
                 style="width: 85%; margin-top: 5px;margin-bottom: -5px;">
                <div class="set-order-name">
                    <i class='fa fa-star'/>
                    Name order
                </div>
            </div>
        </t>
    </t>

    <t t-name="OrderNamePopupWidget">
        <div class="modal-dialog">
            <div class="popup popup-text popup-order-name">
                <p class="title">
                    <t t-esc=" widget.options.title || '' "/>
                </p>
                <input class="input-order-name" type='text'
                       t-att-value="widget.options.value || ''"></input>
                <div class="footer">
                    <div class="button confirm-order-name">
                        Apply
                    </div>
                    <div class="button cancel">
                        Cancel
                    </div>
                </div>
            </div>
        </div>
    </t>

    <t t-name="OrderSelectorPopupWidget">
        <div class="modal-dialog">
            <div class="popup popup-selection">
                <header class="title">
                    <t t-esc=" widget.options.title || 'Select order' "/>
                </header>
                <t t-if="widget.pos.get_order_list().length > widget.pos.config.max_order_shows">
                    <div id='list_order_select' class="popup-order-selection">
                        <t t-foreach="widget.pos.get_order_list() || []"
                           t-as="order">
                            <div class="selection-item selection-order"
                                 t-att-data-uid="order.uid">
                                <t t-esc='order.sequence_number'/>
                                <t t-if="order.order_name">
                                    <span>-</span> <t t-esc="order.order_name"/>
                                </t>
                                <t t-if="!order.order_name">
                                    <span>-</span> Unknown
                                </t>
                            </div>
                        </t>
                    </div>
                </t>
                <div class="footer">
                    <div class="button cancel">
                        Cancel
                    </div>
                </div>
            </div>
        </div>
    </t>

    <t t-extend="OrderSelectorWidget">
        <t t-jquery=".deleteorder-button" t-operation="after">
			<span class="order-button square popup-order-button">
                <i class='fa fa-list' role="img" aria-label="List orders" title="List orders"/>
            </span>
		</t>

        <t t-jquery=".orders.touch-scrollable" t-operation="replace">
            <span class="orders touch-scrollable">
                <t t-foreach="widget.pos.get_order_list()" t-as="order">
                    <t t-if="(widget.pos.config.max_order_shows) > order_index">
                        <t t-if='order === widget.pos.get_order()'>
                            <span style="width: 172px;"
                                  class="order-button select-order selected"
                                  t-att-data-uid="order.uid">
                                <span style="float:left;margin-top:10px"
                                      class='order-sequence'>
                                    <t t-esc='order.sequence_number'/>
                                </span>
                                <p style="margin-top: 0px">
                                    <t t-esc="moment(order.creation_date).format('hh:mm')"/>
                                    <t t-if="order.order_name">
                                        <t t-esc="order.order_name"/>
                                    </t>
                                    <t t-if="!order.order_name">
                                        Unknown
                                    </t>
                                </p>
                            </span>
                        </t>
                        <t t-if='order !== widget.pos.get_order()'>
                            <span style="width: 113px;"
                                  class="order-button select-order"
                                  t-att-data-uid="order.uid">
                                <span style="float:left;"
                                      class='order-sequence'>
                                    <t t-esc='order.sequence_number'/>
                                </span>
                                <p style="margin: 0px;">
                                    <t t-if="order.order_name">
                                        <t t-esc="order.order_name"/>
                                    </t>
                                    <t t-if="!order.order_name">
                                        Unknown
                                    </t>
                                </p>
                            </span>
                        </t>
                    </t>
                </t>
            </span>
            <t t-if="widget.pos.get_order_list().length > widget.pos.config.max_order_shows">
                <div id='order_select'>
                    <center>
                        <b>
                            <p id="selected_order">Select<t
                                    t-esc="widget.pos.get_order_list()[widget.pos.config.max_order_shows-1].sequence_number"/>
                                -
                                <t t-esc="widget.pos.get_order_list().slice(-1).pop().sequence_number"/>
                            </p>
                        </b>
                    </center>
                    <div id="order_dropdown" class="touch-scrollable">
                        <ul>
                            <t t-foreach="widget.pos.get_order_list()"
                               t-as="order">
                                <t t-if="order_index >=widget.pos.config.max_order_shows-1">
                                    <li id="order_name"
                                        t-att-data-uid="order.uid">
                                        <center>
                                            <span style="font-size:16px;font-weight: 800;">
                                                <t t-esc='order.sequence_number'/>
                                            </span>
                                            -
                                            <t t-if="order.order_name">
                                                <t t-esc="order.order_name"/>
                                            </t>
                                        </center>
                                    </li>
                                </t>
                            </t>
                        </ul>
                    </div>
                </div>
            </t>
        </t>
    </t>
</template>
